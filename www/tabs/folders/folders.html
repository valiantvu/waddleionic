<!-- Header Bar -->
<ion-header-bar align-title="center" class="bg-header">
  <div class="buttons">
    <button class="button button-icon icon waddle-search light" ng-click="toggleFolderSearch()"></button>
  </div>
  <h1 ng-dblclick="toggleDeleteButton()" class="title">folders</h1>
  <div class="buttons">
    <button class="button button-icon icon waddle-plus light" ng-click="showFolderCreationPopup()"></button>
  </div>
</ion-header-bar>

<ion-view title="Folders">

  <ion-content class="padding bg-scroll">
    <!-- Search bar -->
    <div ng-show="showFolderSearch" class="list">
      <div class="item item-input-inset searchbox">
      <label class="item-input-wrapper white-bg">
        <i class="icon waddle-search placeholder-icon"></i>
        <input id="folder-search" type="text" placeholder="search your folders" ng-keyup="searchFoldersByName()" ng-model="searchFolders.query">
      </label>
        <!-- <button class="button button-small" type="submit" ng-click="searchFeed()">Submit</button> -->
        <button class="button button-clear" ng-if="searchFolders.query" ng-click="clearSearch()">x</button>
      </div>
    </div>

    <ion-refresher on-refresh="doRefresh()"></ion-refresher>

    <div style="height:50px"></div>
    <svg ng-repeat="folder in folders" style="margin-top: -50" viewBox="0 0 1080 430">
      <defs>
          <pattern id="image1" patternContentUnits="objectBoundingBox" height="100%" width="100%">
              <image x="0" y="0" height="1" width="1" preserveAspectRatio="xMidYMid slice" xlink:href="img/folder-bgs/folderbgs-1.png"/>
          </pattern>
      </defs>
      <defs>
          <pattern id="image2" patternContentUnits="objectBoundingBox" height="100%" width="100%">
              <image x="0" y="0" height="1" width="1" preserveAspectRatio="xMidYMid slice" xlink:href="img/folder-bgs/folderbgs-2.png"/>
          </pattern>
      </defs>
      <defs>
          <pattern id="image3" patternContentUnits="objectBoundingBox" height="100%" width="100%">
              <image x="0" y="0" height="1" width="1" preserveAspectRatio="xMidYMid slice" xlink:href="img/folder-bgs/folderbgs-3.png"/>
          </pattern>
      </defs>
      <defs>
          <pattern id="image4" patternContentUnits="objectBoundingBox" height="100%" width="100%">
              <image x="0" y="0" height="1" width="1" preserveAspectRatio="xMidYMid slice" xlink:href="img/folder-bgs/folderbgs-4.png"/>
          </pattern>
      </defs>
      <defs>
          <pattern id="image5" patternContentUnits="objectBoundingBox" height="100%" width="100%">
              <image x="0" y="0" height="1" width="1" preserveAspectRatio="xMidYMid slice" xlink:href="img/folder-bgs/folderbgs-5.png"/>
          </pattern>
      </defs>
      <defs>
          <pattern id="image6" patternContentUnits="objectBoundingBox" height="100%" width="100%">
              <image x="0" y="0" height="1" width="1" preserveAspectRatio="xMidYMid slice" xlink:href="img/folder-bgs/folderbgs-6.png"/>
          </pattern>
      </defs>
      <defs>
          <pattern id="image7" patternContentUnits="objectBoundingBox" height="100%" width="100%">
              <image x="0" y="0" height="1" width="1" preserveAspectRatio="xMidYMid slice" xlink:href="img/folder-bgs/folderbgs-7.png"/>
          </pattern>
      </defs>
      <g>
        <path id="tab-shape-outline" transform="scale(1.005)" fill="white" d="M1080,496c0,18.226-14.774,33-33,33H33c-18.226,0-33-14.774-33-33V33C0,14.774,14.774,0,33,0  h477h7l46,63h7h477c18.226,0,33,14.774,33,33V496z"/>
        <path ng-click="openFolder(folder.folder.name, $index)" id="tab-shape" transform="translate(0, 5)" fill="url(#image{{ ($index + 1) % 7 + 1}})" d="M1080,496c0,18.226-14.774,33-33,33H33c-18.226,0-33-14.774-33-33V33C0,14.774,14.774,0,33,0  h477h7l46,63h7h477c18.226,0,33,14.774,33,33V496z"/>
        <!-- <path ng-show="showDeleteButton" ng-click="deleteFolderAndContents(folder.folder.name)" transform="scale(2), translate(10, 10)" xmlns="http://www.w3.org/2000/svg" d="M11,22 C17.0751325,22 22,17.0751325 22,11 C22,4.92486745 17.0751325,0 11,0 C4.92486745,0 0,4.92486745 0,11 C0,17.0751325 4.92486745,22 11,22 Z M6.75735931,15.9497475 L6.05025253,15.2426407 L10.2928932,11 L6.05025253,6.75735931 L6.75735931,6.05025253 L11,10.2928932 L15.2426407,6.05025253 L15.9497475,6.75735931 L11.7071068,11 L15.9497475,15.2426407 L15.2426407,15.9497475 L11,11.7071068 L6.75735931,15.9497475 Z" id="path-1"/> -->
        <text ng-click="openFolder(folder.folder.name, $index)" x="50%" y="200" text-anchor="middle" alignment-baseline="middle" font-family="Open Sans" font-weight="600" font-size="50" fill="white">{{ folder.folder.name }} ({{ folder.folder.checkinCount }})</text>
      </g>
    </svg>

  <ion-infinite-scroll
    on-infinite="getUserData()"
    ng-if="moreDataCanBeLoaded"
    distance="10%">
  </ion-infinite-scroll>

  </ion-content>
</ion-view>